{{- $index := slice -}}
{{- range where .Site.RegularPages "Section" "posts" -}}
  {{- if ne .Type "search" -}}
    {{- $index = $index | append (dict
      "title" .Title
      "date" (.Date.Format "2006-01-02")
      "readingTime" (partial "reading-time.html" .)
      "summary" (partial "post-excerpt.html" (dict "page" . "truncate" (default 200 .Site.Params.summaryTruncate)))
      "content" (.Plain | plainify | truncate 2000)
      "permalink" .RelPermalink
      "tags" (or .Params.tags (slice))
      "categories" (or .Params.categories (slice))
    ) -}}
  {{- end -}}
{{- end -}}
{{- $index | jsonify -}}
